<div class="container">
  <h1>Calculadora programação linear de 2 variáveis</h1>

  <form [formGroup]="mathForm">
    <div class="problem-type">
      <p>Este é um problema de:</p>
      <select formControlName="problemType" class="typeProblem">
        <option value="max">Maximização</option>
        <option value="min">Minimização</option>
      </select>
    </div>

    <div class="z-function input-group">
      <span>Z = </span>
      <div class="z-inputs">
        <input type="number" id="z-x1" formControlName="zx1" placeholder="x1">
        <span>x<sub>1</sub> +</span>
        <input type="number" id="z-x2" formControlName="zx2" placeholder="x2">
        <span>x<sub>2</sub></span>
      </div>
    </div>

    <div id="constraints" class="constraints-section">
      <h3>Restrições:</h3>

      <div formArrayName="constraints">
        <div *ngFor="let constraint of constraints.controls; let i=index"
             [formGroupName]="i"
             class="constraint">
          <input type="number" formControlName="x1" placeholder="x1">
          <span>x<sub>1</sub> +</span>
          <input type="number" formControlName="x2" placeholder="x2">
          <span>x<sub>2</sub></span>

          <select formControlName="operator">
            <option value="<=">≤</option>
            <option value=">=">≥</option>
          </select>

          <input type="number" formControlName="constant" placeholder="constante">

          <button type="button" class="remove-btn" (click)="removeConstraint(i)" *ngIf="i > 0">
            ×
          </button>
        </div>
      </div>

      <button type="button" class="add-btn" (click)="addConstraint()">
        Adicionar Restrição
      </button>
    </div>

    <div class="non-negative">
      <p>x<sub>1</sub>, x<sub>2</sub> ≥ 0</p>
    </div>

    <button type="button" class="calculate-btn" (click)="calculateSolution()" [disabled]="!mathForm.valid">
      Resolver
    </button>
  </form>

  <div class="results-section" *ngIf="showResults">
    <div id="result" class="result-display" [innerHTML]="resultHtml">
    </div>

    <div class="table-wrapper" *ngIf="hasResults">
      <table id="tableResult">
        <thead>
        <tr>
          <th>x1</th>
          <th>x2</th>
          <th>Resultado</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let row of tableData" [class]="row.isOptimal ? 'optimal' : ''">
          <td>{{ row.x1 }}</td>
          <td>{{ row.x2 }}</td>
          <td>{{ row.result }}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
